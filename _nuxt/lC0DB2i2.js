import{n as e,cA as a,bs as l,a3 as t,a2 as n,cD as o,ax as s,ai as r,c_ as i,a7 as c,c as d,o as u,M as p,b as m,bP as x,H as v,w as f,a5 as h,d as b,t as g,aa as y,al as w,a as k,S as C,J as $,cV as _,ac as T,au as B,F as I,a8 as A,aK as N,K as R,aM as V,cB as j,aQ as U,R as D,T as M,a6 as E,aN as S,bZ as z,fN as K,fO as O,aO as W,d4 as q,bA as F,_ as Q}from"./Ck65DhTU.js";import{E as G,a as H}from"./DnulTJLV.js";import"./BwAGr_Cw.js";import"./CPubcWut.js";import{c as J}from"./BEisXu1r.js";import P from"./Brh3DTBm.js";import"./BZz6c_uP.js";const Z={key:0,class:"table-empty"},L={key:1},X={key:1,class:"flex-start"},Y=["src"],ee={key:0,class:"border-solid border-0.5px border-#286dff color-#286dff rounded-4px text-10px px-4px py-1px overflow-hidden text-ellipsis whitespace-nowrap max-w-100px ml-10px line-height-15px"},ae=["onMouseenter"],le={key:0,class:"mr-5px"},te={key:1,class:"bg-[--primary-color] rounded-4px text-10px px-4px py-3px overflow-hidden text-ellipsis whitespace-nowrap max-w-100px line-height-19px height-19px"},ne={key:2,class:"bg-[--signal-green] rounded-4px text-10px px-4px py-3px overflow-hidden text-ellipsis whitespace-nowrap max-w-100px line-height-19px height-19px"},oe=["onClick"],se={class:"font-500 text-12px"},re={key:2},ie={class:"flex-between"},ce={class:"text-24px"},de={class:"w-480px flex flex-col items-center justify-center mb-20px"},ue={class:"text-14px color-[--secondary-text] mt-26px"},pe={class:"color-[--primary-color] mr-4px text-17px"},me={class:"mt-26px color-[--main-text] text-14px block"},xe={class:"flex-between"},ve={class:"text-20px font-500"},fe={class:"flex flex-col items-start"},he={class:"text-14px color-[--secondary-text] mb-16px"},be={class:"px-10px py-10px text-14px"},ge={class:"color-[var(--third-text)] text-left text-12px"},ye={class:"color-[var(--main-text)] text-left pl-5px"},we={key:1},ke={class:"color-[var(--third-text)] text-left text-12px"},Ce={class:"color-[var(--main-text)] text-left pl-5px"},$e={class:"color-[var(--main-text)] text-left pl-5px"},_e={class:"color-[var(--main-text)] text-left pl-5px"},Te=Q(e({__name:"list",props:{tableData:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},emits:["refresh","getMultiWalletsAllChain"],setup(e,{emit:Q}){var Te,Be;const Ie=null==(Te=a())?void 0:Te.parent,Ae=null==(Be=null==Ie?void 0:Ie.exposed)?void 0:Be.getMultiWalletsAllChain,{getUserInfo:Ne}=l(),Re=Q,{token_logo_url:Ve,mode:je}=t(n()),{theme:Ue}=t(o()),{t:De}=s(),Me=r(),{evmAddress:Ee}=t(l()),Se=B(!1),ze=I(!1),Ke=I(""),Oe=I(null),We=I(null),qe=B(!1),Fe=B(0),Qe=I(null),{authInfo:Ge}=t(i()),He=I({buttonRefs:{},currentBtnRef:{}});function Je(e){z.confirm(De("walletRemoveTip2"),De("walletRemove"),{type:"warning",icon:K(O),confirmButtonText:De("confirm"),cancelButtonText:De("cancel"),customClass:`${je.value} delete_confirm`}).then(()=>{var a;(null==(a=Ge.value)?void 0:a.authSetting)?function(e){ze.value=!0,Ke.value="",Oe.value=e}(e):z.confirm(De("googleAuthNotBoundTip"),De("bindGoogleAuth"),{type:"warning",icon:K(O),confirmButtonText:De("goToBind"),cancelButtonText:De("cancel"),customClass:`${je.value} delete_confirm`}).then(()=>{Me.push("/safe")})}).catch(e=>{})}function Pe(){var e,a,l,t;if(!Ke.value||6!==Ke.value.length)return void W.error(De("authCodeError"));const n=(null==(t=null==(l=null==(a=null==(e=Oe.value)?void 0:e.balancesInfo)?void 0:a.filter(e=>"bsc"==e.chain))?void 0:l[0])?void 0:t.address)||"";J(n,Ke.value).then(()=>{W.success(De("success")),ze.value=!1,Ke.value="",Re("refresh"),Ne()}).catch(e=>{W.error((null==e?void 0:e.message)||De("fail"))})}function Ze(e){We.value=e,Se.value=!0,setTimeout(()=>{!async function(){var e,a;const l=document.getElementById("qr-chain-canvas-code");if(!l)return;q.toCanvas({canvas:l,content:(null==(e=We.value)?void 0:e.address)||"",width:200,nodeQrCodeOptions:{margin:2},logo:{src:`${Ve.value}chain/${(null==(a=We.value)?void 0:a.chain)||"bsc"}.png`,logoRadius:8}}).catch(e=>{})}()},200)}function Le(e){if(e.isChildren){const a=Me.resolve({path:`/address/${e.address}/${e.chain}`});window.open(a.href,"_blank")}}const Xe=({row:e})=>e.isChildren?"cursor-pointer":"";return(a,l)=>{const t=N,n=y,o=G,s=H,r=j,i=U,B=M,I=S,W=c("copy"),q=x;return u(),d("div",null,[p((u(),v(s,{data:e.tableData,style:{width:"100%"},"row-key":"id","tree-props":{children:"balancesInfo",hasChildren:"hasChildren"},"default-expand-all":!1,class:"table-list hidden-scrollbar bot-manage-table","header-row-class-name":"text-12px sticky top-0 z-10 font-500","row-class-name":Xe,onRowClick:Le},{empty:f(()=>{var a;return[e.loading||0!=(null==(a=e.tableData)?void 0:a.length)?(u(),d("span",L)):(u(),d("div",Z,[m(t)]))]}),default:f(()=>[m(o,{prop:"name",label:a.$t("wallet"),"min-width":200},{default:f(({row:e})=>{var t,o;return[e.isChildren?(u(),d(h,{key:0},[b(g(null==(o=null==(t=e.name)?void 0:t.replace)?void 0:o.call(t,new RegExp("(.{6})(.+)(.{4})"),"$1...$3"))+" ",1),p(m(n,{name:"bxs:copy",class:"ml-5px mb--1px clickable color-[--third-text]",onClick:l[0]||(l[0]=w(()=>{},["stop"]))},null,512),[[W,e.address]])],64)):(u(),d("div",X,[k("img",{class:"mr-8px",style:{"border-radius":"50%"},height:"24",src:("generateAvatarIcon"in a?a.generateAvatarIcon:$(_))((null==e?void 0:e.name)||""),alt:""},null,8,Y),b(" "+g(e.name)+" ",1),m(P,{remark:e.remark,address:e.evmAddress,chain:"bsc",showAddress:!0,onRefresh:l[1]||(l[1]=e=>Re("refresh"))},null,8,["remark","address"]),$(Ee)==e.evmAddress?(u(),d("span",ee,g(a.$t("currentWallet")),1)):C("",!0)]))]}),_:1},8,["label"]),m(o,{prop:"chain",label:a.$t("chain"),align:"right"},{default:f(({row:e})=>{var l;return[b(g(null==(l=("getChainInfo"in a?a.getChainInfo:$(T))(null==e?void 0:e.chain))?void 0:l.name),1)]}),_:1},8,["label"]),m(o,{prop:"balance",label:a.$t("balance1"),align:"right"},{default:f(({row:e,$index:t})=>[k("div",{ref:e=>$(He).currentBtnRef[t]=e,onMouseenter:a=>function(e,a){var l,t,n;qe.value=!0,Fe.value=a,Qe.value={...e},(null==(l=Qe.value)?void 0:l.balancesInfo)&&(Qe.value.balancesInfo=null==(n=null==(t=Qe.value)?void 0:t.balancesInfo)?void 0:n.reduce((e,a)=>{if(["eth","base"].includes(a.chain)){const l=e.find(e=>"eth"===e.chain);l?l.mainTokenBalance=new F(l.mainTokenBalance).plus(a.mainTokenBalance).toFixed():e.push({...a,chain:"eth"})}else e.push(a);return e},[]))}(e,t),onMouseleave:l[2]||(l[2]=e=>qe.value=!1)}," $"+g(("formatNumber"in a?a.formatNumber:$(A))((null==e?void 0:e.balance)||0,2)),41,ae)]),_:1},8,["label"]),m(o,{prop:"source",label:a.$t("origin"),align:"right"},{default:f(({row:e})=>[(null==e?void 0:e.isChildren)?C("",!0):(u(),d(h,{key:0},[e.source?(u(),d("span",le,g(e.source),1)):C("",!0),1==e.genSource?(u(),d("span",te,g(a.$t("import")),1)):(u(),d("span",ne,g(a.$t("create")),1))],64))]),_:1},8,["label"]),m(o,{label:a.$t("operate"),align:"right"},{default:f(({row:e})=>["delete"==e.operate&&$(Ee)!==e.evmAddress?(u(),v(n,{key:0,class:"text-14px text-[--third-text] cursor-pointer hover:color-[--main-text]",name:"ic:baseline-delete",onClick:w(a=>async function(e){Ae&&(await Ae(),Number(null==e?void 0:e.balance)>0?z.confirm(De("walletRemoveTip1"),De("walletRemove"),{type:"warning",icon:K(O),confirmButtonText:De("confirm"),cancelButtonText:De("cancel"),customClass:`${je.value} delete_confirm`}).then(()=>{Je(e)}):Je(e))}(e),["stop","prevent"])},null,8,["onClick"])):(null==e?void 0:e.isChildren)?(u(),d("div",{key:1,class:"bg-[--main-input-button-bg] rounded-4px inline-flex items-center gap-4px py-2px px-4px cursor-pointer",onClick:w(a=>Ze(e),["stop","prevent"])},[m(n,{name:"custom:download",class:"text-10px"}),k("span",se,g($(De)("deposit2")),1)],8,oe)):(u(),d("span",re))]),_:1},8,["label"])]),_:1},8,["data"])),[[q,e.loading]]),m(r,{modelValue:$(Se),"onUpdate:modelValue":l[4]||(l[4]=e=>V(Se)?Se.value=e:null),width:"500",class:R([$(Ue)]),centered:!0,"append-to-body":"","close-on-click-modal":!1,"popper-style":{padding:"20px","border-radius":"8px"},"show-close":!1,"destroy-on-close":""},{header:f(()=>[k("div",ie,[k("span",ce,g(a.$t("deposit2")),1),m(n,{name:"material-symbols-light:close",class:"text-30px cursor-pointer",onClick:l[3]||(l[3]=w(e=>Se.value=!1,["stop","prevent"]))})])]),default:f(()=>{var e,t,n;return[k("div",de,[l[9]||(l[9]=k("canvas",{id:"qr-chain-canvas-code"},null,-1)),k("div",ue,[k("span",pe,g(null==(t=("getChainInfo"in a?a.getChainInfo:$(T))((null==(e=$(We))?void 0:e.chain)||""))?void 0:t.name),1),b(g(a.$t("walletAddress")),1)]),k("span",me,g(null==(n=$(We))?void 0:n.address),1)])]}),_:1},8,["modelValue","class"]),m(r,{modelValue:$(ze),"onUpdate:modelValue":l[7]||(l[7]=e=>V(ze)?ze.value=e:null),width:"480","align-center":"","close-on-click-modal":!1,"show-close":!1,"destroy-on-close":"","append-to-body":""},{header:f(()=>[k("div",xe,[k("span",ve,g(a.$t("DbCheckTitle2")),1),m(n,{name:"material-symbols-light:close",class:"text-30px cursor-pointer",onClick:l[5]||(l[5]=w(e=>ze.value=!1,["stop","prevent"]))})])]),default:f(()=>[k("div",fe,[k("div",he,g(a.$t("authCode")),1),m(i,{modelValue:$(Ke),"onUpdate:modelValue":l[6]||(l[6]=e=>V(Ke)?Ke.value=e:null),placeholder:a.$t("authCodeError"),autofocus:"",maxlength:"6",class:"mb-24px",size:"large",onKeyup:D(Pe,["enter"])},null,8,["modelValue","placeholder"]),m(B,{type:"primary",size:"large",class:"w-full",onClick:Pe},{default:f(()=>[b(g(a.$t("confirm")),1)]),_:1})])]),_:1},8,["modelValue"]),m(I,{visible:$(qe),"onUpdate:visible":l[8]||(l[8]=e=>V(qe)?qe.value=e:null),persistent:!1,"virtual-ref":$(He).currentBtnRef[$(Fe)],"virtual-triggering":"",trigger:"contextmenu",placement:"right","popper-class":"text-center","popper-style":{padding:0,"border-radius":"8px"}},{default:f(()=>{var e,t,n,o,s,r,i;return[k("table",be,[k("tbody",null,[(null==(e=$(Qe))?void 0:e.balancesInfo)?(u(!0),d(h,{key:0},E(null==(t=$(Qe))?void 0:t.balancesInfo,(e,l)=>{var t;return u(),d("tr",{key:l},[k("td",ge,g(null==(t=("getChainInfo"in a?a.getChainInfo:$(T))((null==e?void 0:e.chain)||""))?void 0:t.main_name),1),k("td",ye,g(("formatNumber"in a?a.formatNumber:$(A))((null==e?void 0:e.mainTokenBalance)||0,2)),1)])}),128)):(u(),d("tr",we,[k("td",ke,g((null==(o=("getChainInfo"in a?a.getChainInfo:$(T))((null==(n=$(Qe))?void 0:n.chain)||""))?void 0:o.main_name)||a.$t("mainToken")),1),k("td",Ce,g(("formatNumber"in a?a.formatNumber:$(A))((null==(s=$(Qe))?void 0:s.mainTokenBalance)||0,2)),1)])),k("tr",null,[l[10]||(l[10]=k("td",{class:"color-[var(--third-text)] text-left text-12px"},"USDT",-1)),k("td",$e,g(("formatNumber"in a?a.formatNumber:$(A))((null==(r=$(Qe))?void 0:r.usdtTokenBalance)||0,2)),1)]),k("tr",null,[l[11]||(l[11]=k("td",{class:"color-[var(--third-text)] text-left text-12px"},"USDC",-1)),k("td",_e,g(("formatNumber"in a?a.formatNumber:$(A))((null==(i=$(Qe))?void 0:i.usdcTokenBalance)||0,2)),1)])])])]}),_:1},8,["visible","virtual-ref"])])}}}),[["__scopeId","data-v-fee84070"]]);export{Te as default};
