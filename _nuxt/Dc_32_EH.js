import{n as a,gi as e,ax as l,D as r,F as t,au as i,a7 as s,M as o,fi as n,c,o as d,b as p,a as m,w as u,J as f,t as g,E as b,d as y,a8 as v,K as x,S as h,aa as P,aq as w,T,H as _,aK as k,qm as N,nU as I,aO as S}from"./Ck65DhTU.js";import{E as D,a as L}from"./DnulTJLV.js";import"./BwAGr_Cw.js";import"./CPubcWut.js";import"./BZz6c_uP.js";const E=["infinite-scroll-disabled"],Y={class:"text-12px"},O={key:1},j={class:"text-14px"},M={key:0,class:"color-[--down-color]"},R={key:1,class:"color-[--up-color]"},H={key:0,class:"color-[--up-color]"},U={key:1},z={key:2,class:"color-[--down-color]"},C={key:3},A={class:"flex items-center justify-end gap-4px"},F={class:"mt-[2px] mb-[5px] py-[10px] text-[12px] text-center color-[--third-text]"},$={key:0},q=a({__name:"conditionOrder",props:{searchParams:{}},setup(a){const q=e(),{t:B}=l(),G=a,K=i(),J=t({loading:!1,finished:!1,error:!1}),Q=t(""),X={LAST_PRICE:B("latestPrice"),INDEX_PRICE:B("indexPrice")},V=b(()=>{var a,e,l;const r=(null==(l=null==(e=null==(a=q.metadata)?void 0:a.contractList)?void 0:e.reduce)?void 0:l.call(e,(a,e)=>(a[e.contractId]=e.contractName,a),{}))||{};return r.ALL=B("all"),r}),W=async()=>{if(J.value.loading||J.value.finished)return;const a={filterStatusList:"UNTRIGGERED",...G.searchParams};Q.value&&(a.offsetData=Q.value);try{J.value.loading=!0;const e=await N(a);let l=(a=>{var e;return(null==(e=null==a?void 0:a.map)?void 0:e.call(a,a=>{const e="SELL"===a.side,l=a.type.includes("PROFIT");let r="";return r=e?l?"≥":"≤":l?"≤":"≥",{...a,triggerSign:r}}))||[]})(e.dataList);Q.value&&(l=K.value.concat(l)),e.nextPageOffsetData||(J.value.finished=!0),Q.value=e.nextPageOffsetData,K.value=l}catch(e){J.value.error=!0}finally{J.value.loading=!1}};W();return r(()=>G.searchParams,()=>{Q.value="",K.value=[],J.value.finished=!1,J.value.error=!1,J.value.loading=!1,W()}),(a,e)=>{const l=k,r=D,t=P,i=T,b=L,N=s("copy"),q=n;return o((d(),c("div",{class:"relative min-h-400px bg-[--secondary-bg]","infinite-scroll-delay":200,"infinite-scroll-disabled":f(J).loading||f(J).finished||f(J).error,"infinite-scroll-immediate":!1,"infinite-scroll-distance":300},[p(b,{fit:"",data:f(K),"header-row-class-name":"text-12px sticky top-0 z-10 font-500","cell-class-name":"color-[--main-text] text-12px"},{empty:u(()=>{var e;return[f(J).loading||0!==(null==(e=f(K))?void 0:e.length)?(d(),c("span",O)):(d(),_(l,{key:0,class:"pt-[40px]"},{default:u(()=>[m("span",Y,g(a.$t("emptyNoData")),1)]),_:1}))]}),default:u(()=>[p(r,{label:f(B)("markets1"),prop:"contractId"},{default:u(({row:a})=>[m("span",j,g(f(V)[a.contractId]),1)]),_:1},8,["label"]),p(r,{width:100,label:f(B)("Qty"),prop:"size"},{default:u(({row:e})=>[y(g(("formatNumber"in a?a.formatNumber:f(v))(e.size,10))+" "+g(f(V)[e.contractId].replace("USD","")),1)]),_:1},8,["label"]),p(r,{"min-width":100,align:"right",label:f(B)("price"),prop:"price"},{default:u(({row:e})=>[y(g(e.type.includes("LIMIT")?("formatNumber"in a?a.formatNumber:f(v))(e.price,{decimals:10,limit:20}):f(B)("market")),1)]),_:1},8,["label"]),p(r,{align:"right",label:f(B)("triggerPrice"),prop:"triggerPrice"},{default:u(({row:e})=>[y(g(e.triggerSign)+g(("formatNumber"in a?a.formatNumber:f(v))(e.triggerPrice,{limit:20,decimals:10}))+" "+g(X[e.triggerPriceType]),1)]),_:1},8,["label"]),p(r,{"min-width":100,align:"right",label:f(B)("tradeType"),prop:"tradeType"},{default:u(({row:a})=>[m("span",{class:x("BUY"===a.side?"color-[--up-color]":"color-[--down-color]")},g("BUY"===a.side?f(B)("buy"):f(B)("sell")),3)]),_:1},8,["label"]),p(r,{"min-width":100,align:"right",label:f(B)("orderType"),prop:"orderType"},{default:u(({row:e})=>[e.type.includes("STOP")?(d(),c("span",M,g(a.$t("stopLoss")),1)):e.type.includes("PROFIT")?(d(),c("span",R,g(a.$t("takeProfit")),1)):h("",!0)]),_:1},8,["label"]),p(r,{align:"right",label:f(B)("takeProfitStopLoss"),prop:"takeProfitStopLoss"},{default:u(({row:l})=>[l.openTp.triggerPrice?(d(),c("span",H,g(("formatNumber"in a?a.formatNumber:f(v))(l.openTp.triggerPrice,{limit:20,decimals:10})),1)):(d(),c("span",U,"--")),e[0]||(e[0]=m("span",{class:"color-[--icon-color] mx-4px"},"/",-1)),l.openSl.triggerPrice?(d(),c("span",z,g(("formatNumber"in a?a.formatNumber:f(v))(l.openSl.triggerPrice,{limit:20,decimals:10})),1)):(d(),c("span",C,"--"))]),_:1},8,["label"]),p(r,{align:"right",label:f(B)("orderId"),prop:"id"},{default:u(({row:a})=>[m("div",A,[y(g(a.id.slice(0,4))+"..."+g(a.id.slice(-4))+" ",1),o(p(t,{name:"bxs:copy",class:"color-[#5A5E64]"},null,512),[[N,a.id]])])]),_:1},8,["label"]),p(r,{align:"right",label:f(B)("orderTime"),prop:"createdTime"},{default:u(({row:a})=>[y(g(f(w)(Number(a.createdTime)).format("YYYY-MM-DD HH:mm:ss")),1)]),_:1},8,["label"]),p(r,{align:"right",label:f(B)("validityPeriod"),prop:"l2ExpireTime"},{default:u(({row:a})=>[y(g(f(w)(Number(a.l2ExpireTime)).format("YYYY-MM-DD HH:mm:ss")),1)]),_:1},8,["label"]),p(r,{"min-width":60,align:"right",label:f(B)("operation"),prop:"operate"},{default:u(({row:a})=>[p(i,{size:"small",style:{"--el-button-active-border-color":"transparent"},onClick:e=>(async a=>{await I([a]),W(),S.success(B("cancelledOrderSuccessfully"))})(a.id)},{default:u(()=>[y(g(f(B)("cancel")),1)]),_:1},8,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"]),m("div",F,[f(J).loading&&f(Q)?(d(),c("span",$,g(f(B)("loading")),1)):h("",!0)])],8,E)),[[q,W]])}}});export{q as default};
