import{_ as e,ax as t,bs as l,qA as a,H as s,c as i,J as o,o as r,w as n,a as u,b as p,t as d,T as c,d as m,aK as v,E as x,aa as f,a5 as h,a6 as y,L as b,S as g,F as _,a2 as j,bD as k,bC as w,D as C,au as V,bG as E,K as R,M as S,aV as A,aM as M,aU as T,aN as q,P as I,oT as U,aQ as D,qC as B}from"./Ck65DhTU.js";import{u as F,_ as L}from"./crgzly9i.js";import{u as P,a as W,b as z}from"./V_lXtcbI.js";import{b as N,c as K}from"./CLWMhFTw.js";import{u as Y}from"./BTsbWUxF.js";import{u as $}from"./D1Joxpzi.js";import"./DSJhbugF.js";import"./CcyOPLCC.js";import"./D6a4i4L9.js";import"./CPubcWut.js";import"./Dw5t3e-8.js";import"./3zf6s2PU.js";import"./BZz6c_uP.js";import"./Cacljkka.js";import"./D-tFlNOh.js";import"./BbIkpTl9.js";import"./CNCF1BOl.js";import"./Cjh5n7V4.js";import"./BwAGr_Cw.js";import"./BtHoUnZy.js";import"./B4zcb_8g.js";import"./CdQ2ioqd.js";import"./BXpozOC3.js";import"./B9yB1t2y.js";import"./Bogg8IY1.js";import"./DXnYH_y9.js";import"./BeEAhjD_.js";import"./BL9HHXOV.js";import"./DnulTJLV.js";import"./BDzN6Gig.js";import"./DIZHS5JH.js";import"./DStMXlD-.js";import"./DtZDM5w8.js";import"./CO5_ekb3.js";import"./CSZyNKXU.js";import"./DRzpm8Vw.js";import"./B4EhLJjm.js";/* empty css        */import"./CfgshW7J.js";import"./8V7sqzeV.js";import"./DkNF69gj.js";import"./CAcza6aO.js";const G={class:"color-[--third-text] text-12px mb-20px mt-4px"},H={key:1,class:"flex flex-col items-center pt-60px"},J={class:"color-[--third-text] text-12px mb-20px mt-4px"},Q={key:2},O={class:"color-[--third-text] text-12px mb-20px mt-4px"},X=["data-index"],Z={key:0,class:"border-1px border-solid border-[--dialog-divider] rounded-8px px-12px pt-16px ml-40px mb-16px"},ee=e({__name:"list",props:{isMine:{type:Boolean}},emits:["startAttention","endReached","stop"],setup(e,{emit:j}){const k=_(null),{t:w}=t(),C=j,V=e,E=l(),R=F(),S=P(x(()=>({count:R.list.length,getScrollElement:()=>k.value,estimateSize:()=>200,overscan:5,gap:16}))),A=x(()=>S.value.getVirtualItems()),M=x(()=>S.value.getTotalSize()),T=x(()=>0===R.list.length),q=e=>R.list[e.index]||{};return a(k,()=>{C("endReached")},{distance:100}),(e,t)=>{const l=c,a=v,x=f;return V.isMine&&!o(E).evmAddress?(r(),s(a,{key:0},{default:n(()=>[u("span",G,d(o(w)("noWalletTip")),1),p(l,{type:"primary",class:"text-12px w-266px h-40px",onClick:t[0]||(t[0]=e=>o(E).changeConnectVisible(!0))},{default:n(()=>[m(d(o(w)("connectBotWallet")),1)]),_:1})]),_:1})):V.isMine&&o(T)&&!o(R).query.token_keyword?(r(),i("div",H,[p(x,{name:"custom:twitter-empty",class:"text-61px mb-12px color-[--icon-color]"}),u("span",J,d(o(w)("twitterEmpty")),1),p(l,{type:"primary",class:"text-12px w-266px h-40px",onClick:t[1]||(t[1]=e=>C("startAttention"))},{default:n(()=>[m(d(o(w)("attention")),1)]),_:1})])):o(T)?(r(),i("div",Q,[p(a,{class:"pt-40px"},{default:n(()=>[u("span",O,d(o(w)("emptyNoData")),1)]),_:1})])):(r(),i("div",{key:3,ref_key:"parentRef",ref:k,class:"overflow-y-auto scrollbar-hide",style:{height:"calc(100% - 120px)"},onMouseenter:t[4]||(t[4]=e=>C("stop",!0)),onMouseleave:t[5]||(t[5]=e=>C("stop",!1))},[u("div",{style:b({height:`${o(M)}px`,width:"100%",position:"relative"})},[(r(!0),i(h,null,y(o(A),l=>(r(),i("div",{key:String(l.key),style:b({position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${l.start}px)`})},[u("div",{ref_for:!0,ref:e=>o(S).measureElement(e),"data-index":l.index,class:"border-b-1px border-b-solid border-b-[--border]"},[p(W,{item:q(l),index:l.index,onMeasureElement:t[2]||(t[2]=t=>o(S).measureElement(e.el))},null,8,["item","index"]),["2","3","4"].includes(q(l).type)&&(q(l).retweeted_tweet||q(l).quoted_tweet||q(l).replied_tweet)?(r(),i("div",Z,[p(W,{item:q(l).retweeted_tweet||q(l).quoted_tweet||q(l).replied_tweet,index:-1,onMeasureElement:t[3]||(t[3]=t=>o(S).measureElement(e.el))},null,8,["item"])])):g("",!0)],8,X)],4))),128))],4)],544))}}},[["__scopeId","data-v-b413f3e7"]]),te={class:"flex items-center pb-14px border-b-1px border-b-solid border-b-[--border] mb-12px"},le={class:"flex justify-between items-center"},ae={class:"flex items-center gap-12px"},se={class:"flex justify-between mb-12px items-center"},ie={class:"flex items-center gap-16px"},oe=["onClick"],re={class:"flex items-center gap-8px color-[--secondary-text]"},ne={class:"pt-16px flex items-center"},ue=["src","volume"],pe={__name:"trackerPop",emits:["setDrawerVisible"],setup(e,{emit:a}){const v=a,{t:b}=t(),P=F(),W=Y(),G=j(),H=l(),J=_(1),Q=_(!1),O=_(!1),X=V([]),Z=_(),pe=k("twitterAudio"),de=w("twFollowIds",[]),ce=_({...P.query}),me=1,ve=2,xe=x(()=>de.value.map(e=>e.author_id)),fe=x(()=>[{label:b("hot2"),value:me},{label:b("mine"),value:ve}]),{arr:he}=z(),ye=x(()=>J.value===ve),be=_(ce.value.types.length===he.value.length),ge=_(!1),_e=()=>{ce.value.types=be.value?he.value.map(e=>e.value):[],ge.value=ce.value.types.length>0&&ce.value.types.length<he.value.length},je=e=>{const t=e.length;be.value=t===he.value.length,ge.value=t>0&&t<he.value.length},ke=()=>{ce.value.page_token="",P.finished=!1,P.list=[]},we=async()=>{const e=await K();de.value=e.authors||[]};C(()=>H.accessToken,e=>{e&&ye.value&&(ke(),Ee()),e&&we()}),H.accessToken&&we();const Ce=()=>{Q.value=!1,ke(),P.query={...P.query,...ce.value},Ee()},Ve=U(Ce,300),Ee=async()=>{const e=J.value;if((!ye.value||H.accessToken)&&!P.loading&&!P.finished){P.loading=!0;try{const t=await N({...ce.value,follow_only:ye.value,types:ce.value.types.join(",")});if(t&&J.value===e){ce.value.page_token=t.page_token||"";const e=t.list||[];P.finished=!t.page_token,ce.value.page_token||P.finished?P.list=[...P.list,...e]:P.list=e}}catch(t){}finally{P.loading=!1}}},Re=U(Ee,100);Ee();return C(()=>O.value,e=>{e||(P.list.unshift(...X.value),P.list=P.list.slice(0,100),X.value=[])}),C(()=>W.wsResult[E.PUBLIC_TWITTER],async e=>{var t,l;if(ce.value.types.includes(+e.type)&&!ce.value.token_keyword){if(ye.value&&!xe.value.includes(null==(t=e.author)?void 0:t.author_id))return;const a=P.list.findIndex(t=>t.tweet_id===e.tweet_id);if(e.follow_status=xe.value.includes(null==(l=e.author)?void 0:l.author_id)?1:0,-1!==a)return void(P.list[a]=e);O.value?(X.value.unshift(e),X.value=X.value.slice(0,100)):(P.list.unshift(e),P.list.length>100&&P.list.pop()),pe.value&&G.audioSettings.audio.twitter&&pe.value.play()}}),C(()=>xe.value,()=>{ye.value&&(P.list=P.list.filter(e=>xe.value.includes(e.author.author_id)))}),$(()=>{P.list=[],ce.value.page_token="",Ee()}),(e,t)=>{const l=f,a=A,x=T,_=c,j=q,k=D,w=L;return r(),i("div",{class:R(["w-full h-full bg-[--secondary-bg] p-12px",{"pr-16px":o(P).isLeftFixed,"pl-16px":o(P).isRightFixed}])},[p(l,{name:"custom:drag2",class:"absolute top-4px left-50% ml--6px text-6px bg-[--dialog-list-hover] drag-handle"}),u("div",te,[u("div",le,d(o(b)("twitterTracker")),1),t[9]||(t[9]=u("div",{class:"flex-1 drag-handle h-20px"},null,-1)),u("div",ae,[o(H).evmAddress?(r(),s(l,{key:0,name:"custom:pump-setting",class:"color-[--secondary-text] hover:color-[--main-text] cursor-pointer text-14px",onClick:t[0]||(t[0]=e=>v("setDrawerVisible",!0))})):g("",!0),p(l,{name:"custom:close",class:"text-14px shrink-0 cursor-pointer color-[--main-text]",onClick:t[1]||(t[1]=e=>o(P).visible=!1)})])]),u("div",se,[u("div",ie,[(r(!0),i(h,null,y(o(fe),e=>(r(),i("span",{key:e.value,class:R(["text-14px cursor-pointer",o(J)===e.value?"color-[--main-text]":"color-[--secondary-text]"]),onClick:t=>{return l=e.value,J.value=l,ke(),void Ee();var l}},d(e.label),11,oe))),128)),u("div",re,[p(j,{visible:o(Q),"onUpdate:visible":t[5]||(t[5]=e=>M(Q)?Q.value=e:null),placement:"bottom-end",trigger:"click",width:164,persistent:!1},{reference:n(()=>[p(l,{name:"custom:filter",class:"text-12px cursor-pointer"})]),default:n(()=>[p(a,{modelValue:o(be),"onUpdate:modelValue":t[2]||(t[2]=e=>M(be)?be.value=e:null),indeterminate:o(ge),class:"[--el-checkbox-height:16px] mb-12px",onChange:_e},{default:n(()=>[m(d(o(b)("all")),1)]),_:1},8,["modelValue","indeterminate"]),p(x,{modelValue:o(ce).types,"onUpdate:modelValue":t[3]||(t[3]=e=>o(ce).types=e),class:"flex flex-col [--el-checkbox-height:16px] gap-12px",onChange:je},{default:n(()=>[(r(!0),i(h,null,y(o(he),e=>(r(),s(a,{key:e.value,value:e.value},{default:n(()=>[m(d(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),u("div",ne,[p(_,{class:"min-w-0",onClick:t[4]||(t[4]=e=>Q.value=!1)},{default:n(()=>[m(d(o(b)("cancel")),1)]),_:1}),p(_,{class:"min-w-0",type:"primary",onClick:Ce},{default:n(()=>[m(d(o(b)("confirm")),1)]),_:1})])]),_:1},8,["visible"]),p(l,{class:"cursor-pointer",ref_key:"audioButtonRef",ref:Z,name:o(G).audioSettings.audio.twitter?"custom:ad":"custom:admute"},null,8,["name"]),S(p(l,{name:"custom:stop"},null,512),[[I,o(O)]])])]),p(k,{modelValue:o(ce).token_keyword,"onUpdate:modelValue":t[6]||(t[6]=e=>o(ce).token_keyword=e),style:{"--el-input-bg-color":"var(--main-list-hover)","--el-input-height":"26px"},class:"w-160px",size:"small",clearable:"",placeholder:o(b)("searchCA"),onInput:o(Ve)},{prefix:n(()=>[p(l,{name:"custom:search"})]),_:1},8,["modelValue","placeholder","onInput"])]),o(Z)?(r(),s(w,{key:0,buttonRef:o(Z),type:"twitter"},null,8,["buttonRef"])):g("",!0),p(ee,{isMine:o(ye),onStop:t[7]||(t[7]=e=>O.value=e),onEndReached:o(Re),onStartAttention:t[8]||(t[8]=e=>v("setDrawerVisible",!0))},null,8,["isMine","onEndReached"]),u("audio",{ref_key:"twitterAudio",ref:pe,controls:"",style:{display:"none"},src:("getAudioUrl"in e?e.getAudioUrl:o(B))(o(G).audioSettings.audio.twitter),volume:+o(G).audioSettings.audio.volume/100||.5},null,8,ue)],2)}}};export{pe as default};
