import{f as e,B as l,ao as a,D as t,n as o,x as n,p as s,g as r,Q as u,c as p,o as i,F as c,a as d,b as m,J as f,O as v,K as x,t as g,r as b,j as k,k as _,w as h,aU as F,l as y,L as w,d as C,W as V,R as $,i as N,aV as A,aW as R,E as G,z as j,_ as z}from"./B65fceU8.js";import{E}from"./C7T7CFu_.js";import U from"./CaFzY5_6.js";import{V as B}from"./C82_35TG.js";const D={class:"w-tabs flex-1 flex-wrap"},I=["onClick"],O={class:"clickable color-#3F80F7! flex gap-2px bg-#3F80F71A!"},S={class:"font-500 text-14px lh-[120%] tracking-0% text-[--d-FFF-l-000]"},q={class:"mb-8px text-12px lh-16px"},J={class:"flex-between w-100%"},M={class:"flex-between w-100%"},W=z(e({__name:"proGroups",props:{options:{type:Array,default:()=>[]},modelValue:{type:Number,default:0}},emits:["onConfirm","onDelete","onCancel","update:modelValue","onChangeIndex","onAdd","update:options"],setup(e,{emit:z}){const{t:W}=l(),{lang:K}=a(t()),L=z,P=e,Q=o({buttonRefs:{}}),Y=o(P.options);n(()=>P.options,e=>{Y.value=e});const H=o(),T=s({groupName:""}),X=r(()=>({groupName:[{required:!0,message:W("groupName")+(K.value.indexOf("zh")>-1?"":"&nbsp;")+W("cannotBeEmpty"),trigger:"change"}]})),Z=o(""),ee=o({}),le=o(),ae=o(!1),te=o(),oe=o(),ne=o(),se=o(),re=o(!1);function ue(){ae.value=!1,ee.value[le.value]=!1}function pe(){ee.value[le.value]=!0,j(()=>{var e;null==(e=document.querySelector(".name-input input"))||e.focus()})}function ie(){ee.value[le.value]=!1,L("onCancel",le.value)}function ce(){L("onDelete",le.value)}function de(){var e,l;L("onAdd",Z.value),null==(l=null==(e=ne.value)?void 0:e.close)||l.call(e)}function me(){var e,l;null==(l=null==(e=se.value)?void 0:e.hide)||l.call(e),L("onChangeIndex",Y.value.map(e=>e.group_id))}return n(()=>ee.value,e=>{},{deep:!0}),n(Z,e=>{}),(e,l)=>{const a=_,t=E,o=w,n=V,s=G,r=R,j=A,z=u("click-outside");return i(),p(c,null,[d("ul",D,[d("li",{class:x(["clickable",{active:0===P.modelValue}]),onClick:l[0]||(l[0]=v(e=>L("update:modelValue",0),["stop","prevent"]))},[d("span",null,g(e.$t("defaultGroup")),1)],2),P.options.length>0?(i(!0),p(c,{key:0},b(P.options,e=>(i(),p("li",{key:e.group_id,class:x(["clickable flex gap-2px",{active:P.modelValue===e.group_id}]),onClick:v(l=>L("update:modelValue",e.group_id),["stop","prevent"])},[d("span",null,g(e.name),1),m(a,{ref_for:!0,ref:l=>k(Q).buttonRefs[e.group_id]=l,name:"mdi:dots-vertical",class:"text-14px",onClick:v(l=>{te.value=k(Q).buttonRefs[e.group_id],ae.value=!0,le.value=e.group_id,k(T).groupName=e.name},["stop","prevent"])},null,8,["onClick"])],10,I))),128)):f("",!0),d("li",{ref_key:"addButtonRef",ref:oe,class:"clickable color-#3F80F7! flex gap-2px bg-#3F80F71A!"},[m(a,{name:"custom:add-icon",class:"text-12px"}),d("span",null,g(e.$t("newGroup")),1)],512),m(n,{ref_key:"popoverRef2",ref:se,width:293,trigger:"click"},{reference:h(()=>[d("li",O,[m(a,{name:"custom:list-icon",class:"text-12px"}),d("span",null,g(e.$t("groupManage")),1)])]),default:h(()=>[d("div",S,[d("div",q,g(e.$t("groupManage")),1),m(t,{height:"400px","wrap-class":"mb-12px"},{default:h(()=>[m(k(B),F({modelValue:k(Y),"onUpdate:modelValue":l[1]||(l[1]=e=>y(Y)?Y.value=e:null),class:"flex flex-col",tag:"ul"},{animation:300},{"item-key":"show_index",onStart:l[2]||(l[2]=e=>re.value=!0),onEnd:l[3]||(l[3]=e=>re.value=!1)}),{default:h(()=>[(i(!0),p(c,null,b(k(Y),e=>(i(),p("li",{key:null==e?void 0:e.show_index,class:"flex-between py-12px px-8px hover:bg-[--d-2A2A2A-l-F2F2F2] cursor-move"},[d("span",null,g(null==e?void 0:e.name),1),m(a,{name:"material-symbols:dehaze",class:"text-16px"})]))),128))]),_:1},16,["modelValue"])]),_:1}),d("div",J,[m(o,{style:{background:"var(--d-333-l-F2F2F2)","--el-border":"none"},class:"flex-1",onClick:l[4]||(l[4]=v(()=>{var e,l;return null==(l=null==(e=k(se))?void 0:e.hide)?void 0:l.call(e)},["stop","prevent"]))},{default:h(()=>[C(g(e.$t("cancel")),1)]),_:1}),m(o,{type:"primary",class:"flex-1",onClick:v(me,["stop","prevent"])},{default:h(()=>[C(g(e.$t("confirm")),1)]),_:1})])])]),_:1},512)]),m(n,{visible:k(ae),"virtual-ref":k(te),trigger:"click",title:"","virtual-triggering":"","popper-style":"width: 86px;min-width: 86px;"},{default:h(()=>[$((i(),p("ul",null,[d("li",{class:"font-500 text-14px lh-[100%] tracking-0px mb-20px flex-start gap-4px clickable",onClick:v(pe,["stop","prevent"])},[m(a,{name:"fe:edit",class:"color-#666 text-14px mt-3px"}),d("span",null,g(e.$t("rename")),1)]),d("li",{class:"font-500 text-14px lh-[100%] tracking-0px clickable flex-start gap-4px",onClick:v(ce,["stop","prevent"])},[m(a,{name:"bx:bxs-trash-alt",class:"text-15px color-#666 mt-3px"}),d("span",null,g(e.$t("delete")),1)])])),[[z,()=>ae.value=!1]])]),_:1},8,["visible","virtual-ref"]),m(n,{visible:k(ee)[k(le)],"virtual-ref":k(te),trigger:"click",title:e.$t("rename"),"virtual-triggering":"","popper-style":"--el-popover-title-font-size:14px;--el-popover-title-text-color:var(--d-FFF-l-000)",width:"248",teleported:!1},{default:h(()=>[$((i(),N(j,{ref_key:"formRef",ref:H,model:k(T),rules:k(X),onSubmit:l[6]||(l[6]=v(e=>{var l;(l=k(H))&&l.validate((e,l)=>{var a;e&&(L("onConfirm",le.value,T.groupName),null==(a=H.value)||a.resetFields(),ee.value[le.value]=!1)})},["prevent","stop"]))},{default:h(()=>[m(r,{prop:"groupName","label-position":"top",size:"large",class:"mb-20px!"},{default:h(()=>[m(s,{modelValue:k(T).groupName,"onUpdate:modelValue":l[5]||(l[5]=e=>k(T).groupName=e),placeholder:k(W)("enterGroupName"),maxlength:50,"show-word-limit":"",clearable:""},null,8,["modelValue","placeholder"])]),_:1}),m(r,{class:"mb-0px!"},{default:h(()=>[d("div",M,[m(o,{style:{background:"var(--d-333-l-F2F2F2)"},class:"flex-1",onClick:v(ie,["stop","prevent"])},{default:h(()=>[C(g(e.$t("cancel")),1)]),_:1}),m(o,{type:"primary",class:"flex-1","native-type":"submit"},{default:h(()=>[C(g(e.$t("confirm")),1)]),_:1})])]),_:1})]),_:1},8,["model","rules"])),[[z,ue]])]),_:1},8,["visible","virtual-ref","title"]),m(U,{ref_key:"proPopoverRef",ref:ne,modelValue:k(Z),"onUpdate:modelValue":l[7]||(l[7]=e=>y(Z)?Z.value=e:null),"button-ref":k(oe)||{},width:"248",label:e.$t("newGroup"),placeholder:e.$t("enterGroupName"),prop:"name",title:e.$t("newGroup"),onOnConfirm:de},null,8,["modelValue","button-ref","label","placeholder","title"])],64)}}}),[["__scopeId","data-v-e1dae618"]]);export{W as default};
