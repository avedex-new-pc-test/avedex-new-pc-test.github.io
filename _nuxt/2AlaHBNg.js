import{bl as e,nx as a,ny as s,dO as t,nz as l,bp as r,f as o,br as i,g as n,c as d,o as u,a as c,J as m,b7 as p,i as v,j as f,K as g,af as w,t as y,by as h,ad as b,kS as $,ao as _,D as k,B as x,n as C,p as P,x as V,y as j,A as S,b as T,a0 as E,d as q,w as F,ds as M,bv as R,kT as z,aW as A,E as U,F as B,L as D,O as I,aV as L,$ as J,_ as K}from"./B65fceU8.js";import{s as O}from"./BIrrvYpm.js";import{s as Z}from"./DSXY0Md2.js";import"./CzOUaPrr.js";import"./C7T7CFu_.js";import"./WwFlK4Sr.js";import"./RganNtWS.js";import"./CbxefQZI.js";import"./z77-U_wr.js";import"./DhTyr8lc.js";import"./CnDKkNIY.js";import"./DwCOqVai.js";import"./B2Gqj98b.js";const H={primary:"icon-primary",success:"icon-success",warning:"icon-warning",error:"icon-error",info:"icon-info"},W={[H.primary]:a,[H.success]:l,[H.warning]:t,[H.error]:s,[H.info]:a},G=e({title:{type:String,default:""},subTitle:{type:String,default:""},icon:{type:String,values:["primary","success","warning","info","error"],default:"info"}}),N=o({name:"ElResult"});const Q=h(r(o({...N,props:G,setup(e){const a=e,s=i("result"),t=n(()=>{const e=a.icon,s=e&&H[e]?H[e]:"icon-info";return{class:s,component:W[s]||W["icon-info"]}});return(e,a)=>(u(),d("div",{class:g(f(s).b())},[c("div",{class:g(f(s).e("icon"))},[p(e.$slots,"icon",{},()=>[f(t).component?(u(),v(w(f(t).component),{key:0,class:g(f(t).class)},null,8,["class"])):m("v-if",!0)])],2),e.title||e.$slots.title?(u(),d("div",{key:0,class:g(f(s).e("title"))},[p(e.$slots,"title",{},()=>[c("p",null,y(e.title),1)])],2)):m("v-if",!0),e.subTitle||e.$slots["sub-title"]?(u(),d("div",{key:1,class:g(f(s).e("subtitle"))},[p(e.$slots,"sub-title",{},()=>[c("p",null,y(e.subTitle),1)])],2)):m("v-if",!0),e.$slots.extra?(u(),d("div",{key:2,class:g(f(s).e("extra"))},[p(e.$slots,"extra")],2)):m("v-if",!0)],2))}}),[["__file","result.vue"]])),X={key:1,class:"title2"},Y={key:3,class:"tip"},ee=K(o({__name:"reset",props:{cType:{type:String,required:!0,validator:e=>["login","register","reset"].includes(e)}},emits:["update:c-type"],setup(e,{emit:a}){const s=a,t=e,l=b(),r=$(),{mode:o,lang:i}=_(k()),{t:p}=x(),w=C(60),h=C(!1),K=C(!1),H=C(!1),W=C(!1),G=C(p("startForgetPassword")),N=C(p("next")),ee=C(1),ae=C(),se=C(null),te=P({email:r.email,verificationCode:"",password:"",confirmPassword:""}),le=n(()=>({email:[{required:!0,message:p("startEmailRequiredMsg"),trigger:"blur"},{type:"email",message:p("startEmailError"),trigger:["blur","change"]}],verificationCode:[{required:!0,message:p("startVerificationCodeRequiredMsg"),trigger:"blur"}],password:[{required:!0,message:p("startPasswordRequiredMsg"),trigger:"blur"},{pattern:/^(?=.*[A-Z])(?=.*[a-z])(?=.*\d)[A-Za-z\d@#$%^&*!]{8,20}$/,message:p("startPasswordError"),trigger:"blur"}],confirmPassword:[{required:!0,message:p("startConfirmPasswordRequiredMsg"),trigger:"blur"},{validator:oe,trigger:"blur"}]}));function re(){1===ee.value?s("update:c-type","login"):2===ee.value&&(ee.value=1,G.value=p("startForgetPassword"),N.value=p("next"))}function oe(e,a,s){a!==te.password?s(new Error(p("startConfirmPasswordError"))):s()}function ie(){var e;null==(e=ae.value)||e.validate(e=>{e&&(1===ee.value?(N.value=p("confirm"),de(),ee.value=2):2===ee.value?(H.value=!0,r.verifyRecoverCode({email:te.email,code:te.verificationCode}).then(()=>{r.updateEmailPassword({email:te.email,code:te.verificationCode,newPassword:O(te.password).toString()}).then(()=>{H.value=!1,N.value=p("returnToLogin"),ee.value=3}).catch(e=>{J.error(String(e)),H.value=!1})}).catch(e=>{H.value=!1,J.error(String(e))})):s("update:c-type","login"))})}function ne(){K.value=!0,r.sendEmailCode({email:null==te?void 0:te.email,language:"zh-cn"==i.value||"zh-tw"==i.value?"cn":"en",emailType:"updatePassword"}).then(()=>{h.value=!0,W.value=!1,se.value=Z(()=>{w.value>0?w.value--:(clearInterval(se.value),se.value=null,K.value=!1,h.value=!1,w.value=60)},1e3)}).catch(e=>{J.error(String(e)),se.value||(K.value=!1),W.value=!1})}function de(){W.value=!0,ne()}return V([()=>r.email,()=>t.cType],e=>{"reset"===t.cType&&(te.email=r.email)}),V(()=>l.connectVisible,()=>{ee.value=1,G.value=p("startForgetPassword"),N.value=p("next")}),j(()=>{}),S(()=>{se.value&&clearInterval(se.value)}),(e,a)=>{const s=R,t=U,l=A,r=D,i=Q,n=L;return u(),d("div",{class:g(["w-reset",f(o)])},[3!==f(ee)?(u(),d("h3",{key:0,class:"title",style:E({marginBottom:2===f(ee)?"40px":0})},[T(s,{size:28,style:{color:"var(--d-999-l-222)"},onClick:re},{default:F(()=>[T(f(M))]),_:1}),q(y(f(G)),1)],4)):m("",!0),2===f(ee)?(u(),d("h3",X,y(e.$t("startResetTitle2"))+"("+y(f(z)(f(te).email))+")",1)):m("",!0),T(n,{ref_key:"formRef",ref:ae,model:f(te),rules:f(le),"label-width":"0",autocomplete:"off",size:"large",style:E({marginTop:1===f(ee)?"40px":"10px"}),onSubmit:a[4]||(a[4]=I(()=>{},["prevent"]))},{default:F(()=>[1===f(ee)?(u(),v(l,{key:0,label:"",prop:"email"},{default:F(()=>[T(t,{modelValue:f(te).email,"onUpdate:modelValue":a[0]||(a[0]=e=>f(te).email=e),autocomplete:"new-email"+Math.random(),placeholder:e.$t("startEmail"),name:"emailField"},null,8,["modelValue","autocomplete","placeholder"])]),_:1})):2===f(ee)?(u(),d(B,{key:1},[T(l,{label:"",prop:"verificationCode"},{default:F(()=>[T(t,{modelValue:f(te).verificationCode,"onUpdate:modelValue":a[1]||(a[1]=e=>f(te).verificationCode=e),autocomplete:"new-verificationCode"+Math.random(),placeholder:e.$t("startVerificationCode"),name:"new-verificationCode"},{suffix:F(()=>[T(r,{class:"countdownBtn",link:"",disabled:f(K),loading:f(W),style:E({color:(f(o),"##3F80F7")}),onClick:de},{default:F(()=>[q(y(f(h)?`${f(w)}${e.$t("SS")}`:e.$t("startCountDown")),1)]),_:1},8,["disabled","loading","style"])]),_:1},8,["modelValue","autocomplete","placeholder"])]),_:1}),T(l,{label:"",prop:"password"},{default:F(()=>[T(t,{modelValue:f(te).password,"onUpdate:modelValue":a[2]||(a[2]=e=>f(te).password=e),type:"password",name:"password_field",autocomplete:"new-password"+Math.random(),placeholder:e.$t("startPassword"),"show-password":""},null,8,["modelValue","autocomplete","placeholder"])]),_:1}),T(l,{label:"",prop:"confirmPassword"},{default:F(()=>[T(t,{modelValue:f(te).confirmPassword,"onUpdate:modelValue":a[3]||(a[3]=e=>f(te).confirmPassword=e),type:"password",name:"confirm_password_field",placeholder:e.$t("startConfirmPassword"),autocomplete:"new-password2"+Math.random(),"show-password":""},null,8,["modelValue","placeholder","autocomplete"])]),_:1})],64)):(u(),v(i,{key:2,title:e.$t("startSuccessTitle")},{icon:F(()=>a[5]||(a[5]=[c("img",{src:"data:image/svg+xml,%3csvg%20width='60'%20height='60'%20viewBox='0%200%2060%2060'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20cx='30'%20cy='30'%20r='30'%20fill='%2327AD75'%20fill-opacity='0.12'/%3e%3cpath%20d='M18.75%2030L26.25%2037.5L41.25%2022.5'%20stroke='%2327AD75'%20stroke-width='2.5'/%3e%3c/svg%3e",width:"80px"},null,-1)])),_:1},8,["title"])),T(l,{class:g(["mb-0px!"])},{default:F(()=>[T(r,{color:"#3F80F7",class:"h-48px!",size:"large",loading:f(H),style:{width:"100%"},onClick:ie},{default:F(()=>[q(y(f(N)),1)]),_:1},8,["loading"])]),_:1}),2===f(ee)?(u(),d("p",Y,"*Â "+y(e.$t("startResetTip")),1)):m("",!0)]),_:1},8,["model","rules","style"])],2)}}}),[["__scopeId","data-v-00bd35e7"]]);export{ee as default};
