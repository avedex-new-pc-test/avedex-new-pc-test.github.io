import{n as e,av as r,a2 as a,D as t,E as s,F as n,bM as l,aT as i,au as o,qe as u,c as d,o as c,b as m,J as p,q3 as v,bv as f,ax as b,qf as _,a as A,M as h,t as j,bP as y,H as k,w as T,S as g,a5 as N,a6 as x,al as $,d as w,aa as C,bR as S,a8 as F,L as O,bT as R,bU as L,aK as U,aM as M,ae as q,c4 as H,aO as K,_ as P,fz as V}from"./Ck65DhTU.js";import{L as z,_ as E}from"./DdBYubJL.js";import{E as B}from"./CPubcWut.js";import"./CwWvzNdN.js";import"./DsxdcEHf.js";import"./BqG8h9m0.js";import"./Cjh5n7V4.js";import"./BwAGr_Cw.js";import"./BtHoUnZy.js";import"./CdQ2ioqd.js";import"./B4zcb_8g.js";import"./3zf6s2PU.js";import"./BZz6c_uP.js";import"./B8-LBplc.js";import"./D-tFlNOh.js";import"./BbIkpTl9.js";import"./CNCF1BOl.js";import"./VcOrqKoc.js";import"./BF1S9I1X.js";import"./tmD3CgVF.js";import"./D1Joxpzi.js";import"./Dth2FjKW.js";import"./B6IuEvha.js";import"./CsJaFgS0.js";import"./CF52TSxo.js";import"./Dw5t3e-8.js";import"./B4EhLJjm.js";import"./BuOYwGNx.js";import"./CSZyNKXU.js";import"./DnulTJLV.js";import"./BL9HHXOV.js";import"./-7EO3EdU.js";import"./B9yB1t2y.js";import"./DTCUnfOn.js";import"./D6a4i4L9.js";import"./DRzpm8Vw.js";import"./xuPvBWRH.js";const D=e({__name:"index",props:{currentActiveTab:{type:String,default:"Transactions"}},setup(e){const f=e,b=r(),_=o(!1),A=o(!0),h=n([]),j=o({sort_by:"",order:""}),y=o(""),k=o(""),T=o(""),g=n([]),N=a(),x=s(()=>{var e;return null==(e=b.params)?void 0:e.id}),$=s(()=>{const e=T.value?g.value||[]:h.value||[];return y.value?"sol"==k.value?(null==e?void 0:e.filter(e=>e.sol_first_transfer_in_from==y.value))||[]:(null==e?void 0:e.filter(e=>e.token_first_transfer_in_from==y.value))||[]:e||[]});function w(e){if(!l().currentAddress)return;const r={sort_by:null==e?void 0:e.sort_by,order:null==e?void 0:e.order},a={token_id:x.value,self_address:l().currentAddress,...r};j.value=r,_.value=!0,u(a).then(e=>{const r=(null==e?void 0:e.holderStats)||[];h.value=r||[]}).catch(()=>{h.value=[]}).finally(()=>{_.value=!1})}function C(e){var r;w({sort_by:e.prop,order:null==(r=e.order)?void 0:r.replace("ending","")})}function S(e){if(T.value=e||"",!T.value)return void w(j.value);const r={token_id:x.value,self_address:l().currentAddress,keyword:T.value};_.value=!0,v(r).then(e=>{g.value=Array.isArray(e)?e:[]}).catch(()=>{g.value=[]}).finally(()=>{_.value=!1})}function F(e){y.value?(y.value="",k.value=""):(y.value=e.address||"",k.value=e.type||"")}return t(()=>N.headFollowsNum.all,()=>{"Attention"==f.currentActiveTab&&w()}),t(x,()=>{"Attention"==f.currentActiveTab&&w()}),t(()=>l().currentAddress,e=>{e?"Attention"==f.currentActiveTab&&w():h.value=[]}),i(()=>{"Attention"==f.currentActiveTab&&w()}),(e,r)=>(c(),d("div",null,[m(z,{ref:"holdersRef",tableList:p($),loading:p(_),searchOriginKeyword:p(y),searchOriginType:p(k),isAttention:p(A),onHandleSortChange:C,onFilterAddress:S,onFilterOriginAddress:F},null,8,["tableList","loading","searchOriginKeyword","searchOriginType","isAttention"])]))}}),I={class:"histrory"},J={class:"top"},Q={key:0,class:"content"},Y=["onClick"],Z=P(e({__name:"index",props:{currentActiveTab:{type:String,default:"Transactions"}},setup(e){const u=e,v=f(),{t:P}=b(),V=r(),z=o(!1),D=n([]),Z=s(()=>{var e;return null==(e=V.params)?void 0:e.id}),G=a(),W=o(!1),X=n(),ee=s(()=>v.token),re=s(()=>{var e;const r=q(V.params.id);return(null==r?void 0:r.chain)||(null==(e=ee.value)?void 0:e.chain)||""}),ae=s(()=>Math.max(v.commonHeight-150,450));function te(){if(!l().currentAddress)return;const e={token_id:Z.value,address:l().currentAddress};z.value=!0,_(e).then(e=>{D.value=e||[]}).finally(()=>{z.value=!1})}return t(()=>G.headFollowsNum.all,()=>{"Attention"==u.currentActiveTab&&te()}),t(Z,()=>{"Attention"==u.currentActiveTab&&te()}),t(()=>l().currentAddress,e=>{e?"Attention"==u.currentActiveTab&&te():D.value=[]}),i(()=>{"Attention"==u.currentActiveTab&&te()}),(e,r)=>{const a=C,t=S,s=U,n=B,i=y;return c(),d("div",I,[A("div",J,[A("span",null,j(e.$t("address")),1),A("span",null,j(e.$t("remark")),1),A("span",null,j(e.$t("buy")),1),A("span",null,j(e.$t("sell")),1),A("span",null,j(e.$t("Txs"))+" ("+j(e.$t("buy1"))+")",1),A("span",null,j(e.$t("Txs"))+" ("+j(e.$t("sell1"))+")",1),A("span",null,j(e.$t("currentPosition")),1),A("span",null,j(e.$t("balance")),1),A("span",null,j(e.$t("profit")),1)]),h((c(),k(n,{height:p(ae)},{default:T(()=>{var n;return[p(D).length>0?(c(),d("ul",Q,[(c(!0),d(N,null,x(p(D),(s,n)=>{var i;return c(),d("li",{key:n,class:"flex",onClick:$(e=>function(e){var r;W.value=!0,null==(r=X.value)||r.getUserTxs(e.address)}({address:s.user_address}),["stop"])},[A("span",null,[m(a,{ref_for:!0,ref:"attentionTriggerRef",name:"custom:attention",class:"h-16px w-16px clickable shrink-0 color-[#F45469] align-middle",onClick:$(e=>function(e,r){const a={address:l().currentAddress,user_address:e.user_address,user_chain:re.value};H(a).then(()=>{var e;G.getFollowsNum(),K.success(P("attention1Canceled")),null==(e=D.value)||e.splice(r,1)}).catch(e=>{}).finally(()=>{})}(s,n),["stop","prevent"])},null,8,["onClick"]),w(" *"+j(null==(i=s.user_address)?void 0:i.slice(-6)),1)]),A("div",{class:"flex-end",onClick:r[0]||(r[0]=$(()=>{},["stop","prevent"]))},[m(t,{addressClass:"token-symbol ellipsis",addressStyle:"max-width: 70px",showAddressTitle:"",address:s.user_address,chain:p(re),remark:s.remark,onUpdateRemark:({remark:e})=>s.remark=e},null,8,["address","chain","remark","onUpdateRemark"])]),A("div",null,j(("formatNumber"in e?e.formatNumber:p(F))(s.bug_amount||0,2)),1),A("div",null,j(("formatNumber"in e?e.formatNumber:p(F))(s.sell_amount||0,2)),1),A("span",null,j(("formatNumber"in e?e.formatNumber:p(F))(s.bug_count||0,0)),1),A("span",null,j(("formatNumber"in e?e.formatNumber:p(F))(s.sell_count||0,0)),1),A("span",null,j(("formatNumber"in e?e.formatNumber:p(F))(s.current_position||0,2)),1),A("span",null,"$"+j(("formatNumber"in e?e.formatNumber:p(F))(s.position_value||0,2)),1),A("div",null,[A("span",{class:"value",style:O({color:s.profit>=0?p(R)[0]:p(L)[0]})}," $"+j(("formatNumber"in e?e.formatNumber:p(F))(s.profit||0,2)),5)])],8,Y)}),128))])):g("",!0),p(D)&&0!==(null==(n=p(D))?void 0:n.length)||p(z)?g("",!0):(c(),k(s,{key:1,class:"mt-200px"}))]}),_:1},8,["height"])),[[i,p(z)]]),m(E,{ref_key:"profitLossRef1",ref:X,modelValue:p(W),"onUpdate:modelValue":r[1]||(r[1]=e=>M(W)?W.value=e:null)},null,8,["modelValue"])])}}}),[["__scopeId","data-v-444be805"]]),G=e({__name:"index",props:{currentActiveTab:{type:String,default:"Transactions"}},setup(e){const a=e,t=r(),n=f(),l=s(()=>{var e;const r=q(t.params.id);return(null==r?void 0:r.chain)||(null==(e=n.token)?void 0:e.chain)||""});return(e,r)=>p(V).includes(p(l))?(c(),k(D,{key:0,currentActiveTab:a.currentActiveTab},null,8,["currentActiveTab"])):(c(),k(Z,{key:1,currentActiveTab:a.currentActiveTab},null,8,["currentActiveTab"]))}});export{G as default};
